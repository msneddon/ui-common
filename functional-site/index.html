<!DOCTYPE html>
<html ng-app="landing-pages" lang="en">
    <head>
        <title>KBase Narrative Interface (prototype)</title>
        <link rel="icon" type="image/x-icon" href="assets/img/KBase_favicon.ico">

        <!-- external css -->
        <link rel="stylesheet" type="text/css" href="../ext/bootstrap/3.0.0/css/bootstrap.css" />
        <!--<link rel="stylesheet" type="text/css" href="../ext/jquery-ui/1.10.3/css/custom-theme/jquery-ui-1.10.0.custom.css"> needs justification-->
        
        <link rel="stylesheet" type="text/css" href="assets/css/dataTables.bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/ws-browser.css" />
        <!--<link rel="stylesheet" type="text/css" href="assets/js/acute-select/acute/acute.select/acute.select.css" />-->

        <link rel="stylesheet" type="text/css" href="assets/css/ng-grid.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/jquery.jsonview.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/prettify.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/sankeystyle.css" />
        <link rel="stylesheet" href="../ext/cytoscape.js/2.0.4-jmc/font-awesome-4.0.3/css/font-awesome.css" />
        <link rel="stylesheet" href="../ext/cytoscape.js/2.0.4-jmc/jquery.cytoscape.js-panzoom.css" />
        <link rel="stylesheet" href="../ext/animate/animate.css" />                 
        <!-- End external css -->


        <!-- kbase css -->
        <link rel="stylesheet" type="text/css" href="assets/css/kb-ui.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/kb-visualizations.css" />        
        <link rel="stylesheet" type="text/css" href="assets/css/analysis.css" />        
        <link rel="stylesheet" type="text/css" href="assets/css/search.css" />
        <link rel="stylesheet" type="text/css" href="assets/js/ws-widgets/style.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/nc-tour.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/gwas.css" />

        <link rel="stylesheet" type="text/css" href="assets/css/kbaseLandingPageCard.css" />
        <link rel="stylesheet" type="text/css" href="assets/css/kbaseSEEDFunctions.css" />
        <!-- End kbase css -->


        <!-- External javascript packages -->
        <script src="../ext/bowser/bowser.min.js"></script>
        <script src="../ext/underscore/1.6.0/underscore-min.js"></script>

        <!-- Google Analytics -->

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-48256002-1', 'kbase.us');
            ga('send', 'pageview');
          

            /**
             * A snippet of code to check the browser's version and alert the user if they're using IE <= 9.0.
             * This puts a flag in sessionStorage - as long as that flag's there, the check won't be done again
             * (to avoid having the same thing happen on page refreshes and such).
             *
             * This uses Bowser to detect the browser and version:
             * https://github.com/ded/bowser
             */
            function checkBrowser() {
                var redirectUrl = '//kbase.us/user-support/messages/unsupported-browser';

                if (bowser.msie && bowser.version <= 9) {
                    var protocol = window.location.protocol;
                    window.location = protocol + redirectUrl;
                }
            }

            checkBrowser();
        </script>

        <script src="../ext/jquery/jquery-1.10.2.min.js"></script>
       <!-- <script src="../ext/jquery-migrate/jquery-migrate-1.2.1.js"></script> -->
        <script src="../ext/jquery-ui/1.10.3/js/jquery-ui-1.10.3.custom.min.js"></script>
        <script src="../ext/blockUI/jquery.blockUI.js"></script>
        <script src="../ext/bootstrap/3.0.0/js/bootstrap.js"></script>
        <script src="../ext/d3/d3.v3.min.js"></script>

        <!-- datatables -->
        <script src="../ext/dataTables/1.10.1/js/jquery.dataTables.min.js"></script>
        <script src="../ext/dataTables/1.10.1/js/dataTables.colReorder.min.js"></script>                
        <script src="../ext/dataTables/1.10.1/js/dataTables.colVis.min.js"></script>                        
        <script src="assets/js/dataTables.bootstrap.js"></script>
        <!--<script src="assets/js/FixedHeader.min.js"></script>-->


        <script src="assets/js/jquery.jsonview.js"></script>         
        <script src="assets/js/nc-tour.js"></script>
        <script src="assets/js/jquery.cookie.min.js"></script>
        <script src="assets/js/viz/raphael-min.js"></script>

        <!-- KBase client library javascript -->
        <script src="assets/js/kbclient/kbase.js"></script>
        <script src="assets/js/kbclient/workspaceDeluxe-0.2.1.js"></script>
        <script src="assets/js/kbclient/userandjobstate.js"></script>        
        <script src="assets/js/kbclient/wikiScraper.js"></script>
        <script src="assets/js/kbclient/kbaseTrees.js"></script>        
        <script src="assets/js/kbclient/KBaseExpressionClient.js"></script>
        <script src="assets/js/kbclient/narrativeMethodStore.js"></script>
        <script src="assets/js/kbclient/shock.js"></script>       
        <script src="assets/js/widgetMaxWidthCorrection.js"></script>        

        <!-- widgets -->
        <script src="../src/kbwidget.js"></script>
        <script src="../src/widgets/kbaseAuthenticatedWidget.js"></script>
        <script src="../src/widgets/kbasePanel.js"></script>
        <script src="../src/widgets/kbaseModal.js"></script>

        <script src="assets/js/kbasePromptNew.js"></script>
        <script src="assets/js/ws-widgets/tabs.js"></script>
        <script src="../src/widgets/kbaseLoginFuncSite.js"></script>

        <script src="../src/widgets/maps/kbasePathways.js"></script>
        <script src="../src/widgets/maps/kbasePathway.js"></script>
        <script src="../src/widgets/models/kbaseModelMeta.js"></script>
        <script src="../src/widgets/models/kbaseModelTabs.js"></script>
        <script src="../src/widgets/models/kbaseModelCore.js"></script>     

        <script src="../src/widgets/fbas/kbaseFbaTabs.js"></script>
        <script src="../src/widgets/fbas/kbaseFbaMeta.js"></script>        
        <script src="../src/widgets/fbas/kbaseFormulationForm.js"></script>
        <script src="../src/widgets/fbas/kbaseRunFba.js"></script>

        <script src="../src/widgets/biochemistry/kbaseBioRxnTable.js"></script>
        <script src="../src/widgets/biochemistry/kbaseBioCpdTable.js"></script>

        <script src="../src/widgets/media/kbaseMediaEditor.js"></script>

        <script src="../src/widgets/workspaces/kbaseWSFbaTable.js"></script>
        <script src="../src/widgets/workspaces/kbaseWSMediaTable.js"></script>
    
        <!-- ws obj reference related widgets -->
        <script src="../ext/d3/sankey.js"></script> <!-- this is a d3 plugin -->

        <script src="../src/widgets/workspaces/kbaseWSButtons.js"></script>
        <script src="../src/widgets/workspaces/kbaseWSReferenceList.js"></script>
        <script src="../src/widgets/objgraphs/kbaseWSObjGraphView.js"></script>
        <script src="../src/widgets/objgraphs/kbaseWSObjGraphCenteredView.js"></script>
        <script src="../src/widgets/social/kbaseWSObjRefUsers.js"></script>
        <script src="../src/widgets/social/kbaseNarrativesUsingData.js"></script>
        <!-- end ws obj reference related widgets -->

        <!-- Genome widgets -->
        <script  src="../src/widgets/kbaseLandingPageCard.js"></script>
        <script  src="../src/widgets/genomes/kbaseWikiDescription.js"></script>
        <script  src="../src/widgets/genomes/kbaseContigBrowserButtons.js"></script>
        <script  src="../src/widgets/genomes/kbaseContigBrowser.js"></script>
        <script  src="../src/widgets/genomes/kbaseMultiContigBrowser.js"></script>
        <script  src="../src/widgets/genomes/kbaseGenomeOverview.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneInfo.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneInstanceInfo.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneDomains.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneOperon.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneSequence.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneBiochemistry.js"></script>
        <script  src="../src/widgets/genomes/kbasePanGenome.js"></script>
        <script  src="../src/widgets/genomes/kbasePhenotypeSet.js"></script>
        <script  src="../src/widgets/genomes/kbaseFunctSeqGenomeComparison.js"></script>   


        <!-- protein structure KB widget and associated needs here -->
        <!-- not sure if kbaseTable.js is automatically included already-->
        <script src='../src/widgets/kbaseTable.js'></script>
        <!-- protein structure service client - maybe this should be moved upwards someplace? -->
        <script src="assets/js/kbclient/KBaseProteinStructureClient.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneStructureMatches.js"></script>

    
        <script  src="../src/widgets/genomes/kbaseSimulationSet.js"></script>
        <script  src="../src/widgets/kbaseCardLayoutManager.js"></script>

        <script  src="../src/widgets/genomes/kbaseLitWidget.js"></script>
        <script  src="../src/widgets/genomes/kbaseObjectMeta.js"></script>
        <script  src="../src/widgets/genomes/kbaseGenomeLineage.js"></script>
        <script  src="../src/widgets/kbaseCardLayoutManager.js"></script>
        <script  src="../src/widgets/genomes/kbaseGenomeCompleteness.js"></script>
        <script  src="../src/widgets/genomes/kbaseSEEDFunctions.js"></script>
        <script  src="../src/widgets/genomes/kbaseGenomeGeneTable.js"></script>
        <script  src="../src/widgets/genomes/kbaseGeneExprLinePlot.js"></script>
        <!-- End Genome widgets -->
    
        <!-- Taxonomy widgets -->
        <script  src="../src/widgets/taxa/kbaseTaxonOverview.js"></script>
        <!-- end taxonomy widgets -->
        
        <!-- Regulation widgets -->
        <script  src="../src/widgets/regulation/kbasePromConstraint.js"></script>
        <script  src="../src/widgets/regulation/kbaseRegulome.js"></script>
        <!-- End Regulation widgets -->

        <!-- Expression widgets -->
        <script  src="../src/widgets/expression/kbaseExpressionSeries.js"></script>
        <!-- End Expression widgets -->

        <!-- Meme widgets -->
        <script  src="../src/widgets/meme/logo.js"></script>
        <script  src="../src/widgets/meme/kbaseMemeTable.js"></script>
        <script  src="../src/widgets/meme/kbaseMemeRunResultCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMemeMotifCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMemeRawOutputCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMemeRunParametersCard.js"></script>
        <script  src="../src/widgets/meme/kbaseTomtomRunResultCard.js"></script>
        <script  src="../src/widgets/meme/kbaseTomtomHitsCard.js"></script>
        <script  src="../src/widgets/meme/kbaseTomtomRunParametersCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMastRunResultCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMastHitsCard.js"></script>
        <script  src="../src/widgets/meme/kbaseMastRunParametersCard.js"></script>
        <!-- End Meme widgets -->

        <!-- Cmonkey widgets -->
        <script  src="../src/widgets/cmonkey/kbaseCmonkeyRunResultCard.js"></script>
        <script  src="../src/widgets/cmonkey/kbaseCmonkeyClusterCard.js"></script>
        <script  src="../src/widgets/cmonkey/kbaseCmonkeyMotifCard.js"></script>
        <!-- End Cmonkey widgets -->

        <!-- Inferelator widgets -->
        <script  src="../src/widgets/inferelator/kbaseInferelatorRunResultCard.js"></script>
        <script  src="../src/widgets/inferelator/kbaseInferelatorHitsCard.js"></script>
        <!-- End Inferelator widgets -->

        <!-- Regprecise widgets -->
        <script  src="../src/widgets/regprecise/kbaseRegulomeCard.js"></script>
        <script  src="../src/widgets/regprecise/kbaseRegulonCard.js"></script>
        <!-- End Regprecise widgets -->

        <!-- MAK widgets -->
        <script  src="../src/widgets/mak/kbaseMAKResultCard.js"></script>
        <script  src="../src/widgets/mak/kbaseBarChartCard.js"></script>
        <script  src="../src/widgets/mak/kbaseMAKTilingCard.js"></script>       
        <script  src="../src/widgets/mak/kbaseMAKBiclusterCard.js"></script>
        <script  src="../src/widgets/mak/kbaseHeatmapCard.js"></script>
        <script  src="../src/widgets/mak/kbaseLineChartCard.js"></script>
        <!-- End MAK widgets -->

        <!-- Bambi widgets -->
        <script  src="../src/widgets/bambi/logo.js"></script>
        <script  src="../src/widgets/bambi/kbaseBambiRunResultCard.js"></script>
        <script  src="../src/widgets/bambi/kbaseBambiMotifCard.js"></script>
        <script  src="../src/widgets/bambi/kbaseBambiRawOutputCard.js"></script>
        <script  src="../src/widgets/bambi/kbaseBambiRunParametersCard.js"></script>
        <!-- End Bambi widgets -->

        <!-- GWAS widgets -->
        <script src='../src/widgets/kbaseAuthenticatedWidget.js'></script>
        <script src="//maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
        <script src='../ext/gmaps/gmap3.js'></script>
        <script src="../src/widgets/gwas/kbaseGWASPop.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASPopTable.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASPopMaps.js"></script>        
        <script src="../src/widgets/gwas/kbaseGWASTraitMaps.js"></script>        
        <script src="../src/widgets/gwas/kbaseGWASTraitTable.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASVarTable.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASPopKinshipTable.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASGeneListTable.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASTopVariations.js"></script>
        <script src="../src/widgets/gwas/kbaseGWASTopVariationsTable.js"></script>
        <!-- End GWAS widgets -->
        
        <!-- Narrative Store widgets -->
        <script  src="../src/widgets/narrativestore/kbaseNarrativeMethodMainOverview.js"></script>
         <!-- End Narrative Store widgets -->

        <!-- KBase new workspace client library javascript -->
        <!-- Syntax Highlighter code -->
        <script src="assets/js/prettify.js"></script>

        <!-- Spec widgets -->
        <script  src="../src/widgets/spec/kbaseSpecCommon.js"></script>
        <script  src="../src/widgets/spec/kbaseSpecStorageCard.js"></script>
        <script  src="../src/widgets/spec/kbaseSpecModuleCard.js"></script>
        <script  src="../src/widgets/spec/kbaseSpecTypeCard.js"></script>
        <script  src="../src/widgets/spec/kbaseSpecFunctionCard.js"></script>
        <script src="../src/widgets/spec/kbaseKidlWebEditor.js"></script>
        <!-- End Spec widgets -->

        <script src="../src/widgets/trees/kbaseTree.js"></script>
        <script src="../src/widgets/trees/kbaseMSA.js"></script>
        <script src="lib/trees/canvastext.js"></script>
        <script src="lib/trees/excanvas.js"></script>
        <script src="lib/trees/menu.js"></script>            
        <script src="lib/trees/knhx.js"></script>
        <script src="lib/trees/easytree.js"></script>

        <!-- Network widgets and dependencies -->
        <script src="../ext/cytoscape.js/2.0.4-jmc/arbor.js"></script>
        <script src="../ext/cytoscape.js/2.0.4-jmc/cytoscape.js"></script>
        <script src="../ext/cytoscape.js/2.0.4-jmc/jquery.cytoscape.js-panzoom.js"></script>
        <script src="../ext/cytoscape.js/2.0.4-jmc/layout.arbor.js"></script>
        <script  src="../src/widgets/networks/kbasePPICard.js"></script>
        <script  src="../src/widgets/networks/kbaseNetworkCard.js"></script>
        <!-- End Network widgets -->

        <!-- app -->
        <script src="assets/js/file-upload-1.6.12/angular-file-upload-shim.min.js"></script>
        <script src="js/angular-1.2.14/angular.min.js"></script>

        <script src="js/angular-1.2.14/angular-resource.min.js"></script> 
        <script src="js/angular-1.2.14/angular-animate.min.js"></script> 
        <script src="js/ui-router-0.2.10/angular-ui-router.min.js"></script>
        <script src="js/ui-bootstrap-0.11.0/ui-bootstrap-tpls-0.11.0.min.js"></script>
        <script src="assets/js/file-upload-1.6.12/angular-file-upload.min.js"></script>

        <script src="js/app.js"></script>        
        <script src="js/search.js"></script>

        <script src="js/directives/landingpages.js"></script>
        <script src="js/directives/cards.js"></script>
        <!--<script src="js/directives/fav.js"></script>-->
        <script src="js/directives/ws.js"></script>           
        <script src="js/directives/trees.js"></script>        
        <script src="js/directives/narrative.js"></script> 
        <script src="js/directives/narrativestore.js"></script>
        <script src="js/directives/autofillFix.js"></script>
        <script src="js/directives/modeling.js"></script>
        <script src="js/directives/communities.js"></script>        
        <script src="js/controllers.js"></script>
        <!--<script src="js/services/favorites.js"></script>-->
        <script src="js/services/workspaceUI.js"></script>

        <!--<script src="assets/js/acute-select/acute/acute.select/acute.select.js"></script>         -->
        <script src="js/services/narrativeUI.js"></script> 
        <script src="js/kbapi.js"></script>
        <script src="assets/js/header.js"></script>
        
        <!-- RequireJS should go after all other javascript imports -->
        <script src="../ext/requirejs/2.1.9/require.js"></script>
        <!-- end application -->
    </head>

    <body>
        <div id="wrap">
            <div id="content">
                <div class="nav navbar-kbase navbar-fixed-top nav-collapse nav-collapse-scrollable bs-navbar-scroll-collapse">
                    <a href="http://www.kbase.us" class="pull-left">
                        <img id="logo" src="assets/img/kbase_logo.png" width="46"/>
                    </a>

                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav"> 
                            <!--<li class="dropdown" ng-class="{ active: $state.includes('narrative')}">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Narrative <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#/narrative/">Newsfeed</a></li>                
                                    <li><a href="#/narrative/projects/">Projects</a></li>
                                </ul>
                            </li>-->
                            <li ng-class="{ active: $state.includes('narratives')}">
                                <a ui-sref="narratives.featured" >Narratives</a>
                            </li>
                            <!--
                            <li ng-class="{ active: $state.includes('analysis')}">
                                <a ui-sref="analysis.apps">Apps</a>
                            </li>-->
                            <li ng-class="{ active: $state.includes('ws')}">
                                <a ui-sref="ws">Workspaces</a>
                            </li>
                            <li ng-class="{ active: $state.includes('search')}">
                                <a ng-click="newSearch()" ng-controller="searchBarController">Search Data</a>
                            </li>
                            <li><a href="//kbase.us/services/docs/uploader/uploader.html">Upload</a></li>
                        </ul>

                        <!--
                        <ul class="nav navbar-nav"> 
                            <li ng-class="{ active: $state.includes('favorites')}"><a href="#/favorites/all/">Favorites <span class="badge  favorite-count"></span></a></li>
                            <li class="fav-loading"></li>
                        </ul>
                        -->
                 
                        <div id="signin-button" class="pull-right"></div>
                        <ul class="nav navbar-nav pull-right">
                            <li class="dropdown help-dropdown">
                                <a id="kbase_help_menu_label" href="#kbase_help_menu" class="dropdown-toggle" data-toggle="dropdown" onclick="return false;">Help <b class="caret"></b></a>
                                <ul id="kbase_help_menu" class="dropdown-menu" role="menu" aria-labelledby="kbase_help_menu_label">
                                    <li><a href="http://kbase.us/for-users/narrative-quick-start/">Narrative Quick Start Guide</a></li>
                                    <!--<li><a href="#/landing-pages-help">Landing Page Documentation</a></li>-->
                                    <li><a href="http://kbase.us/get-started/data-search-quick-start/">Search Quick Start Guide</a></li>
                                    <li><a href="mailto:help@kbase.us">Email help@kbase.us</a></li>
                                </ul>                        
                            </li>
                        </ul>
                    </div> 
                </div>

                <div id="app" ui-view></div>

            </div> 
            
            <div id="footer" class="col-sm-9 col-sm-offset-3 col-md-9 col-md-offset-3 main">
                <ul>
                    <li><a href="//kbase.us/science/what-is-kbase/" target="_blank">About KBase</a></li>
                    <li><a href="//kbase.us/user-support/documentation/" target="_blank">Documentation</a></li>
                    <li><a href="//kbase.us/about/terms-and-conditions" target="_blank">Terms and Conditions</a></li>
                    <li><a href="//kbase.us/contact-us/" target="_blank">Contact Us</a></li>
                    <li><a href="http://science.energy.gov/" target="_blank"><img class="center-block" src="./assets/images/doe_sc_logo.png" /></a></li>
                </ul>
                
            </div>
        </div>
        

    </body>

</html>

